\section{GSE with Heap Summaries}

The function $\mathbb{VS}(L,R,\phi_g,r,f)$ constructs the value-set given a
heap, reference, and desired field:
\[
\begin{array}{rcl}
  \mathbb{VS}(\cfgnt{L},\cfgnt{R},\phi_g,\cfgnt{r},\cfgnt{f}) & = & \{(\phi\wedge\phi^\prime\ \cfgnt{l}^\prime) \mid \\
  & & \ \ \ \ \exists \cfgnt{l}\ ((\phi\ l) \in L(r)\ \wedge \\
  & & \ \ \ \ \ \ \ \ \exists \cfgnt{r}^\prime ( \cfgnt{r}^\prime = R(\cfgnt{l},\cfgnt{f})\ \wedge \\
  & & \ \ \ \ \ \ \ \ \ \ \ \ (\phi^\prime\ l^\prime) \in \cfgnt{L}(\cfgnt{r}^\prime)\ \wedge\\
  & & \ \ \ \ \ \ \ \ \ \ \ \ \mathbb{S}(\phi\wedge\phi^\prime\wedge \phi_g)))\}
\end{array}
\]
where $\mathbb{S}(\phi)$ returns true if $\phi$ is satisfiable.

The strengthen function $\mathbb{ST}(L,r,\phi^\prime)$ strengthens every
constraint from the reference $r$ with $\phi^\prime$ and keeps only location-constraint
pairs that are satisfiable after this strengthening:
\[
\begin{array}{rcl} 
\mathbb{ST}(L,r,\phi,\phi_g) & = & \{ (\phi\wedge\phi^\prime\ l) \mid  \\
& & \ \ \ \ (\phi^\prime\ l)\in L(r)\wedge\mathbb{S}(\phi\wedge\phi^\prime\wedge\phi_g) \}
\end{array}
\]

\input{summarize-precise}
\input{precise-fig}
