\begin{figure}[ht]
\begin{center}
\cfgstart
\cfgrule{P}{\lp $\mu$ \lp \cfgnt{C} \cfgnt{m}\rp\rp}
\cfgrule{$\mu$}{(\cfgnt{CL} ...)}
\cfgrule{T}{\cfgnt{T} \cfgor \cfgt{bool}}
\cfgrule{CL}{\lp\cfgt{class} \cfgnt{C} \lp\lb\cfgnt{T} \cfgnt{f}\rb ...\rp \lp\cfgnt{M} ...\rp}
\cfgrule{M}{\lp\cfgnt{T} \cfgnt{m} \lp\lb\cfgnt{T} \cfgnt{x}\rb ...\rp e\rp}
\cfgrule{e}{\cfgnt{x}}
\cfgorline{\cfgnt{v}}
\cfgorline{\lp\cfgt{new} \cfgnt{C}\rp}
\cfgorline{\lp\cfgnt{e} \cfgt{\$} \cfgnt{f}\rp}
\cfgorline{\lp\cfgnt{e} \cfgt{@} \cfgnt{m} \lp\cfgnt{e} ...\rp\rp}
\cfgorline{\lp\cfgnt{e} \cfgt{=} \cfgnt{e}\rp}
%     (x := e)
%     (x $ f := e)
%     (if e e else e)
%     (var T x := e in e)
%     (begin e ...)
\cfgrule{estate}{($\sigma$ $\eta$ \cfgnt{e} \cfgnt{k})}

\cfgrule{$\sigma$}{$\emptyset$ \cfgor \lp $\sigma$ \cfgq{[}
  \cfgnt{address} \cfgq{$\mapsto$} \cfgnt{v} \cfgq{]}\rp }

\cfgrule{$\eta$}{$\emptyset$ \cfgor \lp $\eta$ \cfgq{[} \cfgnt{id}
  \cfgq{$\mapsto$} \cfgnt{v} \cfgq{]}\rp }

\cfgrule{ae}{\cfgnt{v} \cfgor \cfgnt{id}}	
\cfgrule{e}{\cfgnt{ae} \cfgor \lp\cfgq{@} \cfgnt{e}\rp}
	\cfgorline{\lp\cfgnt{setop} \lp\cfgnt{pattern} \cfgq{in} \cfgnt{e}\rp ~\cfgnt{e}\rp}
	\cfgorline{\lp\cfgq{if} \cfgnt{e} \cfgnt{e} \cfgnt{e}\rp}
	\cfgorline{\lp\cfgq{let} \lp\cfgq{[}\cfgnt{id} \cfgnt{e}\cfgq{]}\rp ~\cfgnt{e}\rp}
	\cfgorline{\lp \cfgnt{op} \cfgnt{e} \cfgnt{e} ...\rp}
\cfgrule{v}{\cfgt{number}}
	\cfgorline{\cfgq{true} \cfgor \cfgq{false}}
	\cfgorline{\cfgq{error}}
	\cfgorline{\cfgt{string}}
	\cfgorline{\lp\cfgq{addr} \cfgnt{address}\rp}
	\cfgorline{\lp\cfgq{const-set} \cfgnt{v} ...\rp}
	\cfgorline{\lp\cfgq{const-tuple} \cfgnt{v} ...\rp}
\cfgrule{pattern}{\cfgnt{id} \cfgor \lp\cfgq{tuple} \cfgnt{id} ...\rp}
\cfgrule{op}{\cfgnt{binop} \cfgor \cfgnt{unaop} \cfgor \cfgq{set} \cfgor \cfgq{tuple}}
\cfgrule{setop}{\cfgq{setFilter} \cfgor \cfgq{setBuild}}

\cfgrule{k}{\cfgq{ret}}
	\cfgorline{\lp\cfgq{@} \cfgq{*} \cfgq{->} \cfgnt{k}\rp}
	\cfgorline{\lp\cfgnt{setop} \lp\cfgnt{pattern} \cfgq{in} \cfgq{*}\rp ~\cfgnt{e} \cfgq{->} \cfgnt{k}\rp}
	\cfgorline{\lp\cfgq{if} \cfgq{*} \cfgnt{e} \cfgnt{e} \cfgq{->} \cfgnt{k}\rp}
	\cfgorline{\lp\cfgq{pop} \cfgnt{$\eta$} \cfgnt{k}\rp}
	\cfgorline{\lp\cfgq{let} \lp\cfgq{[}\cfgnt{id} \cfgq{*}\cfgq{]}\rp ~\cfgnt{e} \cfgq{->} \cfgnt{k}\rp}
	\cfgorline{\lp \cfgnt{op} \lp\cfgnt{v} ...\rp \cfgq{*}
          \lp\cfgnt{e} ...\rp  \cfgq{->} \cfgnt{k}\rp}

\cfgend
\end{center}
\caption{Javalite Surface Syntax}
\label{fig:expr:stx}
\end{figure}
