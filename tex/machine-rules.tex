
\begin{figure*}[t]
\begin{center}
\mprset{flushleft}
\begin{mathpar}
	\inferrule[Variable lookup]{}{
      (L\ R\ \eta\ \mathrm{x}\ k) \rightarrow (L\ R\ \eta\ \eta(\mathrm{x})\ k)
	}
\and
	\inferrule[Field Access(eval)]{}{
      (L\ R\ \eta\ (e\ \$\ \mathrm{f})\ k) \rightarrow (L\ R\ \eta\ e\ (*\ \$\ \mathrm{f} \rightarrow k))
	}
\and
	\inferrule[Field Access (NULL)]{
      L(r) = \emptyset
    }{
      (L\ R\ \eta\ r\ (*\ \$\ \mathrm{f} \rightarrow k)) \rightarrow 
      (L[r \mapsto \{(\bot,\top)\}]\ R\ \eta\ r\ (*\ \$\ \mathrm{f} \rightarrow k))
	}
\and
	\inferrule[Field Access (non-NULL)]{
      L(r) = \emptyset \\
      \mathrm{type}(r) = \mathrm{C}_r\\
      \mathrm{fresh}_l(\mathrm{C}_r) = l \\\\
      R^\prime = R[\forall \mathrm{f} \in \mathrm{C}_r\ ((l\ \mathrm{f}) \mapsto \mathit{fresh_r}(\mathit{type}(\mathrm{f})))]
    }{
      (L\ R\ \eta\ r\ (*\ \$\ \mathrm{f} \rightarrow k)) \rightarrow 
      (L[r \mapsto \{(l,\top)\}]\ R^\prime\ \eta\ r\ (*\ \$\ \mathrm{f} \rightarrow k))
	}
\and
	\inferrule[Field Access]{
      L(r) \neq \emptyset \\
      \mathrm{type}(r) = C_r \\
      \mathrm{fresh}_r(C_r) = r_f \\\\
      Q = \{(r^\prime\ \phi)\ |\ (l\ \phi) \in L(r) \wedge r^\prime \in R(l\ \mathrm{f})\} \\\\
      L_f = L[r_f \mapsto \cup_{(r^\prime\ \phi)\in Q} \{(l\ \phi^\prime\phi)\ |\ (l\ \phi^\prime) \in L(r^\prime)\}]
    }{
      (L\ R\ \eta\ r\ (*\ \$\ \mathrm{f} \rightarrow k)) \rightarrow 
      (L_f\ R\ \eta\ r_f\ k)
	}
\end{mathpar}
\end{center}
\caption{Uber-lazy state reductions}
\label{fig:expr:red}
\end{figure*}


%% Expression syntax


