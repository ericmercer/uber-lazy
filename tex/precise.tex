\section{GSE with Heap Summaries}

The function $\mathbb{VS}(L,R,\phi_g,r,f)$ constructs the value-set given a
heap, reference, and desired field:
\[
\begin{array}{rcl}
  \mathbb{VS}(L,R,\phi_g,r,f) & = & \{(\phi\wedge\phi^\prime\ l^\prime) \mid \\
  & & \ \ \ \ \exists l\ ((\phi\ l) \in L(r)\ \wedge \\
  & & \ \ \ \ \ \ \ \ \exists r^\prime \in R(l,f) ( \\
  & & \ \ \ \ \ \ \ \ \ \ \ \ (\phi^\prime\ l^\prime) \in L(r^\prime)\ \wedge\\
  & & \ \ \ \ \ \ \ \ \ \ \ \ \mathbb{S}(\phi\wedge\phi^\prime\wedge \phi_g)))\}
\end{array}
\]
where $\mathbb{S}(\phi)$ returns true if $\phi$ is satisfiable.

The strengthen function $\mathbb{ST}(L,r,\phi^\prime)$ strengthens every
constraint from the reference $r$ with $\phi^\prime$ and keeps only location-constraint
pairs that are satisfiable after this strengthening:
\[
\begin{array}{rcl} 
\mathbb{ST}(L,r,\phi) & = & \{ (\phi\wedge\phi^\prime\ l) \mid 
(\phi^\prime\ l)\in L(r)\wedge\mathbb{S}(\phi\wedge\phi^\prime\wedge\phi_g) \}
\end{array}
\]

\input{summarize-precise}
\input{precise-fig}
